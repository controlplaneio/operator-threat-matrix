<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="483px" preserveAspectRatio="none" style="width:772px;height:483px;background:#FFFFFF;" version="1.1" viewBox="0 0 772 483" width="772px" zoomAndPan="magnify"><defs><filter height="300%" id="fzmlatyv21hvu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="24" x2="24" y1="88.2969" y2="399.625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="213.5" x2="213.5" y1="88.2969" y2="399.625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="407" x2="407" y1="88.2969" y2="399.625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="507" x2="507" y1="88.2969" y2="399.625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="569" x2="569" y1="88.2969" y2="399.625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="715" x2="715" y1="88.2969" y2="399.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="5" y="84.9951">User</text><ellipse cx="24" cy="15" fill="#FEFECE" filter="url(#fzmlatyv21hvu)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M24,23 L24,50 M11,31 L37,31 M24,50 L11,65 M24,50 L37,65 " fill="none" filter="url(#fzmlatyv21hvu)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="5" y="411.6201">User</text><ellipse cx="24" cy="424.9219" fill="#FEFECE" filter="url(#fzmlatyv21hvu)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M24,432.9219 L24,459.9219 M11,440.9219 L37,440.9219 M24,459.9219 L11,474.9219 M24,459.9219 L37,474.9219 " fill="none" filter="url(#fzmlatyv21hvu)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="182.5" y="84.9951">KubeAPI</text><path d="M193.5,44 L193.5,68 M193.5,56 L210.5,56 " fill="none" filter="url(#fzmlatyv21hvu)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="222.5" cy="56" fill="#FEFECE" filter="url(#fzmlatyv21hvu)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="182.5" y="411.6201">KubeAPI</text><path d="M193.5,418.9219 L193.5,442.9219 M193.5,430.9219 L210.5,430.9219 " fill="none" filter="url(#fzmlatyv21hvu)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="222.5" cy="430.9219" fill="#FEFECE" filter="url(#fzmlatyv21hvu)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="335" y="84.9951">AdmissionController</text><ellipse cx="407" cy="56" fill="#FEFECE" filter="url(#fzmlatyv21hvu)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="403,44,409,39,407,44,409,49,403,44" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="335" y="411.6201">AdmissionController</text><ellipse cx="407" cy="430.9219" fill="#FEFECE" filter="url(#fzmlatyv21hvu)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="403,418.9219,409,413.9219,407,418.9219,409,423.9219,403,418.9219" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="489" y="84.9951">Etcd</text><path d="M489.5,36 C489.5,26 507.5,26 507.5,26 C507.5,26 525.5,26 525.5,36 L525.5,62 C525.5,72 507.5,72 507.5,72 C507.5,72 489.5,72 489.5,62 L489.5,36 " fill="#FEFECE" filter="url(#fzmlatyv21hvu)" style="stroke:#000000;stroke-width:1.5;"/><path d="M489.5,36 C489.5,46 507.5,46 507.5,46 C507.5,46 525.5,46 525.5,36 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="489" y="411.6201">Etcd</text><path d="M489.5,424.9219 C489.5,414.9219 507.5,414.9219 507.5,414.9219 C507.5,414.9219 525.5,414.9219 525.5,424.9219 L525.5,450.9219 C525.5,460.9219 507.5,460.9219 507.5,460.9219 C507.5,460.9219 489.5,460.9219 489.5,450.9219 L489.5,424.9219 " fill="#FEFECE" filter="url(#fzmlatyv21hvu)" style="stroke:#000000;stroke-width:1.5;"/><path d="M489.5,424.9219 C489.5,434.9219 507.5,434.9219 507.5,434.9219 C507.5,434.9219 525.5,434.9219 525.5,424.9219 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="536" y="84.9951">Operator</text><ellipse cx="569.5" cy="56" fill="#FEFECE" filter="url(#fzmlatyv21hvu)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="565.5,44,571.5,39,569.5,44,571.5,49,565.5,44" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="536" y="411.6201">Operator</text><ellipse cx="569.5" cy="430.9219" fill="#FEFECE" filter="url(#fzmlatyv21hvu)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="565.5,418.9219,571.5,413.9219,569.5,418.9219,571.5,423.9219,565.5,418.9219" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#fzmlatyv21hvu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="89" x="669" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="676" y="72.9951">Resources</text><rect fill="#FEFECE" filter="url(#fzmlatyv21hvu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="89" x="669" y="398.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="676" y="418.6201">Resources</text><polygon fill="#A80036" points="202,115.4297,212,119.4297,202,123.4297,206,119.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="24" x2="208" y1="119.4297" y2="119.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="31" y="114.3638">custom resource changes</text><polygon fill="#A80036" points="395,144.5625,405,148.5625,395,152.5625,399,148.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="214" x2="401" y1="148.5625" y2="148.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="221" y="143.4966">validate custom resources</text><polygon fill="#A80036" points="225,173.6953,215,177.6953,225,181.6953,221,177.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="219" x2="406" y1="177.6953" y2="177.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="231" y="172.6294">return success</text><polygon fill="#A80036" points="495.5,202.8281,505.5,206.8281,495.5,210.8281,499.5,206.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="214" x2="501.5" y1="206.8281" y2="206.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="221" y="201.7622">write custom resource changes</text><polygon fill="#A80036" points="35,231.9609,25,235.9609,35,239.9609,31,235.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="29" x2="213" y1="235.9609" y2="235.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="41" y="230.895">change successful</text><polygon fill="#A80036" points="225,261.0938,215,265.0938,225,269.0938,221,265.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="219" x2="568.5" y1="265.0938" y2="265.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="231" y="260.0278">poll for current state</text><polygon fill="#A80036" points="557.5,290.2266,567.5,294.2266,557.5,298.2266,561.5,294.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="214" x2="563.5" y1="294.2266" y2="294.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="221" y="289.1606">state change</text><polygon fill="#A80036" points="703.5,319.3594,713.5,323.3594,703.5,327.3594,707.5,323.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="569.5" x2="709.5" y1="323.3594" y2="323.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="576.5" y="318.2935">perform changes</text><polygon fill="#A80036" points="580.5,348.4922,570.5,352.4922,580.5,356.4922,576.5,352.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="574.5" x2="714.5" y1="352.4922" y2="352.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="586.5" y="347.4263">resources changed</text><polygon fill="#A80036" points="225,377.625,215,381.625,225,385.625,221,381.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="219" x2="568.5" y1="381.625" y2="381.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="231" y="376.5591">return state?</text><!--MD5=[7e9383255d94cda0bbb0df01009636fc]
@startuml operator-sequence-diagram
' Operator Types? ns, cluster wide, external?
actor User as user
boundary KubeAPI as kapi
control AdmissionController as admctr
database Etcd as etcd
control Operator as op
participant Resources as res

user -> kapi : custom resource changes
kapi -> admctr : validate custom resources
admctr -> kapi : return success
kapi -> etcd : write custom resource changes
kapi -> user : change successful
op -> kapi : poll for current state
kapi -> op : state change
op -> res : perform changes
res -> op : resources changed
op -> kapi : return state?

@enduml

@startuml operator-sequence-diagram
actor User as user
boundary KubeAPI as kapi
control AdmissionController as admctr
database Etcd as etcd
control Operator as op
participant Resources as res

user -> kapi : custom resource changes
kapi -> admctr : validate custom resources
admctr -> kapi : return success
kapi -> etcd : write custom resource changes
kapi -> user : change successful
op -> kapi : poll for current state
kapi -> op : state change
op -> res : perform changes
res -> op : resources changed
op -> kapi : return state?

@enduml

PlantUML version 1.2022.0(Tue Jan 11 16:16:42 GMT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>